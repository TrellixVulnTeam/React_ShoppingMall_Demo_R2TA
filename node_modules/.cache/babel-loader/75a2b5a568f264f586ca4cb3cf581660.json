{"ast":null,"code":"import _toConsumableArray from\"/Users/kimjunghwan/coding_apple/REACT CLASS/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/kimjunghwan/coding_apple/REACT CLASS/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/kimjunghwan/coding_apple/REACT CLASS/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import React,{useContext,useState,lazy,Suspense,useEffect}from\"react\";import{Navbar,Container,Nav,NavDropdown,Button}from\"react-bootstrap\";import\"./App.css\";import shoeList from\"./data\";import styled from\"styled-components\";import{Link,Route,Switch,useHistory}from\"react-router-dom\";import axios from\"axios\";import{useSelector}from\"react-redux\";// import Detail from \"./Detail.js\";\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Detail=/*#__PURE__*/lazy(function(){return import(\"./Detail.js\");});// import Cart from \"./Cart.js\";\nvar Cart=/*#__PURE__*/lazy(function(){return import(\"./Cart.js\");});var Storage=/*#__PURE__*/lazy(function(){return import(\"./Storage.js\");});var Pointer=styled.img(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  cursor: pointer;\\n\"])));var TopTitle=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 250px;\\n  margin: 0 auto;\\n  color: red;\\n  padding: 30px 0 0;\\n  border-bottom: 3px solid red;\\n  margin-bottom: 20px;\\n\"])));export var stockContext=/*#__PURE__*/React.createContext();// 범위 생성(다른 파일의 컴포넌트에서 사용할 시 export 필요)\nfunction App(){var _useState=useState(shoeList),_useState2=_slicedToArray(_useState,2),shoes=_useState2[0],shoesChange=_useState2[1];var _useState3=useState([10,11,12,15,14,20]),_useState4=_slicedToArray(_useState3,2),stock=_useState4[0],stockChange=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),recent=_useState6[0],recentChange=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),url=_useState8[0],urlChange=_useState8[1];// function dataAdd(data) {\n//   let newData = [...shoes];\n//   let addData = [...newData, ...data];\n//   shoesChange(addData);\n// }\nvar state=useSelector(function(state){return state;});// localstorage 있으면 받아옴 없으면 패스\nuseEffect(function(){var copy=_toConsumableArray(state.reducer3);var storage=JSON.parse(localStorage.getItem(\"local\"));if(storage){copy=_toConsumableArray(storage);}state.reducer3=copy;},[url]);useEffect(function(){var copy=_toConsumableArray(recent);var local=_toConsumableArray(state.reducer3);// console.log(local);\nvar IntLocal=local.map(function(i){return parseInt(i);});// console.log(IntLocal);\nif(IntLocal.length>0){}var newRecent=shoes.filter(function(i){return IntLocal.includes(i.id);});copy=newRecent;recentChange(copy);},[url]);console.log(recent);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(Navbar,{bg:\"light\",expand:\"lg\",children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Navbar.Brand,{as:Link,to:\"/\",onClick:function onClick(){urlChange(url+1);},children:\"ShoeShop\"}),/*#__PURE__*/_jsx(Navbar.Toggle,{\"aria-controls\":\"basic-navbar-nav\"}),/*#__PURE__*/_jsx(Navbar.Collapse,{id:\"basic-navbar-nav\",children:/*#__PURE__*/_jsxs(Nav,{className:\"me-auto\",children:[/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/\",onClick:function onClick(){urlChange(url+1);},children:\"Home\"}),/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/detail/0\",children:\"Detail\"}),/*#__PURE__*/_jsx(Nav.Link,{as:Link,to:\"/storage\",onClick:function onClick(){urlChange(url+1);},children:\"Recently viewed\"}),/*#__PURE__*/_jsxs(NavDropdown,{title:\"Dropdown\",id:\"basic-nav-dropdown\",children:[/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#action/3.1\",children:\"Action\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#action/3.2\",children:\"Another action\"}),/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#action/3.3\",children:\"Something\"}),/*#__PURE__*/_jsx(NavDropdown.Divider,{}),/*#__PURE__*/_jsx(NavDropdown.Item,{href:\"#action/3.4\",children:\"Separated link\"})]})]})})]})}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsxs(Route,{exact:true,path:\"/\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"background\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"20% Season off\"}),/*#__PURE__*/_jsx(\"p\",{children:\"jumbotron\"}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Button,{variant:\"primary\",children:\"Primary\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(stockContext.Provider,{value:stock,children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:shoes.map(function(item,index){return/*#__PURE__*/_jsx(ItemBox,{item:item,index:index},index);})})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){// 로딩중 UI\n// axios post 요청 = 데이터 전송\n// axios.post('서버URL', {id : \"아이디\", pw : 1234});\n// axios get요청\naxios.get(\"https://codingapple1.github.io/shop/data2.json\").then(function(result){// 로딩중 UI 안보이게\n//서버와 연결 성공했을때\n// result는 성공해서 받아온 모든 정보들이 담겨있는 객체\nshoesChange([].concat(_toConsumableArray(shoes),_toConsumableArray(result.data)));// result.data는 결과 객체에서 데이터 프로퍼타에 해당하는 값만 가져옴\n}).catch(function(){//서버와 연결 실패했을때\nconsole.log(\"실패!\");});//fetch도 위와 사용법은 거의 같음 대신 axios는 JSON파일의 \"\":\"\" 내용의 문자열에서\n// \"\"를 제거하여 객체 타입으로 반환해주고 fetch 함수는 JSON 그대로 반환하기때문에 객체타입으로 변환하는 작업이 필요하다.\n// fetch(\"https://codingapple1.github.io/shop/data2.json\")\n//   .then((result) => {\n//     console.log(result.data);\n//   })\n//   .catch();\n// 위처럼 사용하면 undefined 출력됨, 객체타입으로 변환 필요\n},children:\"\\uB354\\uBCF4\\uAE30\"})]})]}),/*#__PURE__*/_jsx(Route,{exact:true,path:\"/detail/:id\",children:/*#__PURE__*/_jsx(stockContext.Provider,{value:stock,children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"\\uB85C\\uB529\\uC911\\uC785\\uB2C8\\uB2E4...\"}),children:/*#__PURE__*/_jsx(Detail,{shoes:shoes,shoesChange:shoesChange,stock:stock,stockChange:stockChange,url:url,urlChange:urlChange})})})}),/*#__PURE__*/_jsx(Route,{path:\"/cart\",children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"\\uB85C\\uB529\\uC911\\uC785\\uB2C8\\uB2E4...\"}),children:/*#__PURE__*/_jsx(Cart,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/storage\",children:/*#__PURE__*/_jsx(Suspense,{fallback:/*#__PURE__*/_jsx(\"div\",{children:\"\\uB85C\\uB529\\uC911\\uC785\\uB2C8\\uB2E4...\"}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(TopTitle,{children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\uCD5C\\uADFC \\uBCF8 \\uC0C1\\uD488\"})}),/*#__PURE__*/_jsx(stockContext.Provider,{value:stock,children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:recent.map(function(item,index){return/*#__PURE__*/_jsx(Storage,{item:item,index:index,stock:stock,stockChange:stockChange},index);})})})]})})}),/*#__PURE__*/_jsx(Route,{path:\"/:id\",children:/*#__PURE__*/_jsx(\"div\",{children:\"\\uC544\\uBB34\\uAC70\\uB098 \\uC801\\uC5C8\\uC744\\uB54C \\uC774\\uAC70 \\uBCF4\\uC5EC\\uC90C\"})})]})]});}function ItemBox(props){var history=useHistory();// state 공유 범위 사용 변수\nvar stock=useContext(stockContext);return/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4\",onClick:function onClick(){history.push(\"/detail/\"+props.item.id);},children:[/*#__PURE__*/_jsx(Pointer,{src:\"https://codingapple1.github.io/shop/shoes\"+(props.index+1)+\".jpg\",alt:\"\\uC0C1\\uD488\\uC774\\uBBF8\\uC9C01\",width:\"100%\"}),/*#__PURE__*/_jsx(\"h4\",{children:props.item.title}),/*#__PURE__*/_jsxs(\"p\",{children:[props.item.content,\" & \",props.item.price]}),/*#__PURE__*/_jsx(Stock,{index:props.index})]});}function Stock(props){// state 공유 범위 사용 변수\nvar stock=useContext(stockContext);// 부모의 context범위 안에 포함되어 있는 컴포넌트들은 전부 state값 공유 가능\n// 공유 범위 사용 변수 작성 시...\nreturn/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC7AC\\uACE0 : \",stock[props.index]]});}export default App;","map":{"version":3,"sources":["/Users/kimjunghwan/coding_apple/REACT CLASS/shop/src/App.js"],"names":["React","useContext","useState","lazy","Suspense","useEffect","Navbar","Container","Nav","NavDropdown","Button","shoeList","styled","Link","Route","Switch","useHistory","axios","useSelector","Detail","Cart","Storage","Pointer","img","TopTitle","div","stockContext","createContext","App","shoes","shoesChange","stock","stockChange","recent","recentChange","url","urlChange","state","copy","reducer3","storage","JSON","parse","localStorage","getItem","local","IntLocal","map","i","parseInt","length","newRecent","filter","includes","id","console","log","item","index","get","then","result","data","catch","ItemBox","props","history","push","title","content","price","Stock"],"mappings":"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","sourcesContent":["import React, { useContext, useState, lazy, Suspense, useEffect } from \"react\";\nimport { Navbar, Container, Nav, NavDropdown, Button } from \"react-bootstrap\";\nimport \"./App.css\";\nimport shoeList from \"./data\";\nimport styled from \"styled-components\";\n\nimport { Link, Route, Switch, useHistory } from \"react-router-dom\";\n\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\n// import Detail from \"./Detail.js\";\nlet Detail = lazy(() => {\n  return import(\"./Detail.js\");\n});\n\n// import Cart from \"./Cart.js\";\nlet Cart = lazy(() => {\n  return import(\"./Cart.js\");\n});\n\nlet Storage = lazy(() => {\n  return import(\"./Storage.js\");\n});\n\nlet Pointer = styled.img`\n  cursor: pointer;\n`;\n\nlet TopTitle = styled.div`\n  width: 250px;\n  margin: 0 auto;\n  color: red;\n  padding: 30px 0 0;\n  border-bottom: 3px solid red;\n  margin-bottom: 20px;\n`;\n\nexport let stockContext = React.createContext();\n// 범위 생성(다른 파일의 컴포넌트에서 사용할 시 export 필요)\n\nfunction App() {\n  let [shoes, shoesChange] = useState(shoeList);\n  let [stock, stockChange] = useState([10, 11, 12, 15, 14, 20]);\n  let [recent, recentChange] = useState([]);\n  let [url, urlChange] = useState(0);\n\n  // function dataAdd(data) {\n  //   let newData = [...shoes];\n  //   let addData = [...newData, ...data];\n  //   shoesChange(addData);\n  // }\n\n  let state = useSelector((state) => {\n    return state;\n  });\n\n  // localstorage 있으면 받아옴 없으면 패스\n  useEffect(() => {\n    let copy = [...state.reducer3];\n    let storage = JSON.parse(localStorage.getItem(\"local\"));\n    if (storage) {\n      copy = [...storage];\n    }\n    state.reducer3 = copy;\n  }, [url]);\n\n  useEffect(() => {\n    let copy = [...recent];\n    let local = [...state.reducer3];\n    // console.log(local);\n    let IntLocal = local.map((i) => {\n      return parseInt(i);\n    });\n    // console.log(IntLocal);\n    if (IntLocal.length > 0) {\n    }\n    let newRecent = shoes.filter((i) => {\n      return IntLocal.includes(i.id);\n    });\n\n    copy = newRecent;\n    recentChange(copy);\n  }, [url]);\n\n  console.log(recent);\n\n  return (\n    <div className=\"App\">\n      <Navbar bg=\"light\" expand=\"lg\">\n        <Container>\n          <Navbar.Brand\n            as={Link}\n            to=\"/\"\n            onClick={() => {\n              urlChange(url + 1);\n            }}\n          >\n            ShoeShop\n          </Navbar.Brand>\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\n          <Navbar.Collapse id=\"basic-navbar-nav\">\n            <Nav className=\"me-auto\">\n              {/* <Nav.Link>\n                <Link to=\"/\">Home</Link>\n              </Nav.Link> */}\n              <Nav.Link\n                as={Link}\n                to=\"/\"\n                onClick={() => {\n                  urlChange(url + 1);\n                }}\n              >\n                Home\n              </Nav.Link>\n              <Nav.Link as={Link} to=\"/detail/0\">\n                Detail\n              </Nav.Link>\n              <Nav.Link\n                as={Link}\n                to=\"/storage\"\n                onClick={() => {\n                  urlChange(url + 1);\n                }}\n              >\n                Recently viewed\n              </Nav.Link>\n              <NavDropdown title=\"Dropdown\" id=\"basic-nav-dropdown\">\n                <NavDropdown.Item href=\"#action/3.1\">Action</NavDropdown.Item>\n                <NavDropdown.Item href=\"#action/3.2\">\n                  Another action\n                </NavDropdown.Item>\n                <NavDropdown.Item href=\"#action/3.3\">\n                  Something\n                </NavDropdown.Item>\n                <NavDropdown.Divider />\n                <NavDropdown.Item href=\"#action/3.4\">\n                  Separated link\n                </NavDropdown.Item>\n              </NavDropdown>\n            </Nav>\n          </Navbar.Collapse>\n        </Container>\n      </Navbar>\n\n      {/* Switch태그로 감싸면 중복되는 url주소 있어도 상단에 작성된 하나만 보여줌 */}\n      <Switch>\n        <Route exact path=\"/\">\n          <div className=\"background\">\n            <h1>20% Season off</h1>\n            <p>jumbotron</p>\n            <p>\n              <Button variant=\"primary\">Primary</Button>\n            </p>\n          </div>\n          <div className=\"container\">\n            {/* 범위 생성 html */}\n            <stockContext.Provider value={stock}>\n              <div className=\"row\">\n                {shoes.map((item, index) => {\n                  return <ItemBox item={item} index={index} key={index} />;\n                })}\n              </div>\n            </stockContext.Provider>\n            <button\n              className=\"btn btn-primary\"\n              onClick={() => {\n                // 로딩중 UI\n\n                // axios post 요청 = 데이터 전송\n                // axios.post('서버URL', {id : \"아이디\", pw : 1234});\n\n                // axios get요청\n                axios\n                  .get(\"https://codingapple1.github.io/shop/data2.json\")\n                  .then((result) => {\n                    // 로딩중 UI 안보이게\n                    //서버와 연결 성공했을때\n                    // result는 성공해서 받아온 모든 정보들이 담겨있는 객체\n                    shoesChange([...shoes, ...result.data]);\n                    // result.data는 결과 객체에서 데이터 프로퍼타에 해당하는 값만 가져옴\n                  })\n                  .catch(() => {\n                    //서버와 연결 실패했을때\n                    console.log(\"실패!\");\n                  });\n                //fetch도 위와 사용법은 거의 같음 대신 axios는 JSON파일의 \"\":\"\" 내용의 문자열에서\n                // \"\"를 제거하여 객체 타입으로 반환해주고 fetch 함수는 JSON 그대로 반환하기때문에 객체타입으로 변환하는 작업이 필요하다.\n                // fetch(\"https://codingapple1.github.io/shop/data2.json\")\n                //   .then((result) => {\n                //     console.log(result.data);\n                //   })\n                //   .catch();\n                // 위처럼 사용하면 undefined 출력됨, 객체타입으로 변환 필요\n              }}\n            >\n              더보기\n            </button>\n          </div>\n        </Route>\n        <Route exact path=\"/detail/:id\">\n          <stockContext.Provider value={stock}>\n            <Suspense fallback={<div>로딩중입니다...</div>}>\n              <Detail\n                shoes={shoes}\n                shoesChange={shoesChange}\n                stock={stock}\n                stockChange={stockChange}\n                url={url}\n                urlChange={urlChange}\n              />\n            </Suspense>\n          </stockContext.Provider>\n        </Route>\n\n        <Route path=\"/cart\">\n          <Suspense fallback={<div>로딩중입니다...</div>}>\n            <Cart />\n          </Suspense>\n        </Route>\n\n        <Route path=\"/storage\">\n          <Suspense fallback={<div>로딩중입니다...</div>}>\n            <div className=\"container\">\n              <TopTitle>\n                <h1>최근 본 상품</h1>\n              </TopTitle>\n              <stockContext.Provider value={stock}>\n                <div className=\"row\">\n                  {recent.map((item, index) => {\n                    return (\n                      <Storage\n                        item={item}\n                        index={index}\n                        key={index}\n                        stock={stock}\n                        stockChange={stockChange}\n                      />\n                    );\n                  })}\n                </div>\n              </stockContext.Provider>\n            </div>\n          </Suspense>\n        </Route>\n\n        <Route path=\"/:id\">\n          {/* :id 는 아무문자를 의미 */}\n          <div>아무거나 적었을때 이거 보여줌</div>\n        </Route>\n      </Switch>\n      {/* <Route path=\"~~~\" component={~~~}></Route> */}\n    </div>\n  );\n}\n\nfunction ItemBox(props) {\n  let history = useHistory();\n\n  // state 공유 범위 사용 변수\n  let stock = useContext(stockContext);\n\n  return (\n    <div\n      className=\"col-md-4\"\n      onClick={() => {\n        history.push(\"/detail/\" + props.item.id);\n      }}\n    >\n      <Pointer\n        src={\n          \"https://codingapple1.github.io/shop/shoes\" +\n          (props.index + 1) +\n          \".jpg\"\n        }\n        alt=\"상품이미지1\"\n        width=\"100%\"\n      />\n      <h4>{props.item.title}</h4>\n      <p>\n        {props.item.content} & {props.item.price}\n      </p>\n      <Stock index={props.index}></Stock>\n    </div>\n  );\n}\n\nfunction Stock(props) {\n  // state 공유 범위 사용 변수\n  let stock = useContext(stockContext);\n\n  // 부모의 context범위 안에 포함되어 있는 컴포넌트들은 전부 state값 공유 가능\n  // 공유 범위 사용 변수 작성 시...\n  return <p>재고 : {stock[props.index]}</p>;\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}