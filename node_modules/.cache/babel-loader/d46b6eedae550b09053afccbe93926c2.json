{"ast":null,"code":"import _toConsumableArray from\"/Users/kimjunghwan/coding apple/REACT CLASS/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/kimjunghwan/coding apple/REACT CLASS/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _taggedTemplateLiteral from\"/Users/kimjunghwan/coding apple/REACT CLASS/shop/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";var _templateObject,_templateObject2;import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{useHistory,useParams}from\"react-router-dom\";import styled from\"styled-components\";import\"./Detail.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Box=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  padding: 20px;\\n\"])));var Title=styled.h4(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  font-size: 25px;\\n  color: \",\";\\n\"])),function(props){return props.color;});// class Detail2 extends React.Component{\n//   componentDidMount(){\n//     //컴포넌트 생성될 때\n//   }\n//   componentWillUnmount(){\n//     // 컴포넌트 소멸할 때\n//   }\n// }\nfunction Detail(props){// useEffect(() => {\n//   async function fetchResult() {\n//     let result = await axios.get(\n//       \"https://codingapple1.github.io/shop/data2.json\"\n//     );\n//     props.shoesChange([...props.shoes, ...result.data]);\n//   }\n//   console.log(props.shoes);\n//   fetchResult();\n// }, []);\nconsole.log(props.shoes);var _useState=useState(true),_useState2=_slicedToArray(_useState,2),alert=_useState2[0],alertChange=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),inputData=_useState4[0],inputDataChange=_useState4[1];// 컴포넌트가 mount 되었을때, update 될때 특정 코드 실행\n// use Effect 는 여러개 생성 가능 대신 먼저 적힌 코드부터 실행\n// use Effect 콜백함수 뒤에 인자로 []를 사용하여 안에 특정 state를 집어넣을 수 있다.\n// 즉 []는 state 조건을 뜻하고 해당 []가 비어있으면 조건에 맞는값이 없으므로\n// 해당 useEffect는 실행되지 않는다. = 해당 컴포넌트가 처음 로드될때만 실행됨\n// [] 내부에 state 여러개 추가 가능 ex) [state1, state2...]\nuseEffect(function(){var timer=setTimeout(function(){alertChange(false);},2000);console.log(\"hello\");// unmount 될때\nreturn function(){clearTimeout(timer);};// settimeout은 해당 초가 지나기 전에 사용자에 의해 페이지 변경이 일어나면\n// 버그가 발생할 수 있어 실행 후 제거해주는 것이 좋다. = clearTimeout\n},[]);var history=useHistory();var _useParams=useParams(),id=_useParams.id;// useParams 반환값은 객체 그 안에 url의 모든 파라미터 담겨있음\n// 그래서 destructuring 을 사용해 변수에 담아줌\nvar selectItem=props.shoes.find(function(i){return i.id==id;});// find 메서드는 앞에 온 배열의 하나하나를 인자로 넣어주어 뒤에 콜백함수에 적어준 조건에 맞는 첫번째 값을 반환한다.\n// 만약 조건에 맞는 모든 값들을 얻고 싶다면 filter 함수를 사용해 배열형태로 조건에 맞는 값들을 받아올 수 있다.\nconsole.log(selectItem);console.log(id);function stockMinus(){var stock=_toConsumableArray(props.stock);var idx=selectItem.id;console.log(stock);stock.splice(idx,1,stock[idx]-1);console.log(stock);return stock;}return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Title,{className:\"red\",children:\"Detail\"})}),inputData,/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){inputDataChange(e.target.value);}}),// 보통의 UI가 이렇게 true. false를 반환하는 state를 만들고\n// 삼항조건식으로 생성 및 제거하는 방법으로 구축한다.\nalert===true?/*#__PURE__*/_jsx(\"div\",{className:\"my-alert-2\",children:/*#__PURE__*/_jsx(\"p\",{children:\"\\uC7AC\\uACE0\\uAC00 \\uC5BC\\uB9C8 \\uB0A8\\uC9C0 \\uC54A\\uC558\\uC2B5\\uB2C8\\uB2E4\"})}):null,/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://codingapple1.github.io/shop/shoes\"+(selectItem.id+1)+\".jpg\",width:\"100%\",alt:\"\\uC774\\uBBF8\\uC9C0\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"pt-5\",children:selectItem.title}),/*#__PURE__*/_jsx(\"p\",{children:selectItem.content}),/*#__PURE__*/_jsxs(\"p\",{children:[selectItem.price,\"\\uC6D0\"]}),/*#__PURE__*/_jsx(Info,{stock:props.stock,selectItem:selectItem}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){props.stockChange(stockMinus);},children:\"\\uC8FC\\uBB38\\uD558\\uAE30\"}),\"\\xA0\",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){history.push(\"/\");},children:\"\\uB4A4\\uB85C\\uAC00\\uAE30\"})]})]})]});}function Info(props){return/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC7AC\\uACE0 : \",props.stock[props.selectItem.id]]});}export default Detail;","map":{"version":3,"sources":["/Users/kimjunghwan/coding apple/REACT CLASS/shop/src/Detail.js"],"names":["axios","React","useEffect","useState","useHistory","useParams","styled","Box","div","Title","h4","props","color","Detail","console","log","shoes","alert","alertChange","inputData","inputDataChange","timer","setTimeout","clearTimeout","history","id","selectItem","find","i","stockMinus","stock","idx","splice","e","target","value","title","content","price","stockChange","push","Info"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport \"./Detail.scss\";\n\nlet Box = styled.div`\n  padding: 20px;\n`;\n\nlet Title = styled.h4`\n  font-size: 25px;\n  color: ${(props) => props.color};\n`;\n\n// class Detail2 extends React.Component{\n//   componentDidMount(){\n//     //컴포넌트 생성될 때\n//   }\n\n//   componentWillUnmount(){\n//     // 컴포넌트 소멸할 때\n//   }\n// }\n\nfunction Detail(props) {\n  // useEffect(() => {\n  //   async function fetchResult() {\n  //     let result = await axios.get(\n  //       \"https://codingapple1.github.io/shop/data2.json\"\n  //     );\n  //     props.shoesChange([...props.shoes, ...result.data]);\n  //   }\n  //   console.log(props.shoes);\n  //   fetchResult();\n  // }, []);\n\n  console.log(props.shoes);\n\n  let [alert, alertChange] = useState(true);\n  let [inputData, inputDataChange] = useState(\"\");\n\n  // 컴포넌트가 mount 되었을때, update 될때 특정 코드 실행\n  // use Effect 는 여러개 생성 가능 대신 먼저 적힌 코드부터 실행\n  // use Effect 콜백함수 뒤에 인자로 []를 사용하여 안에 특정 state를 집어넣을 수 있다.\n  // 즉 []는 state 조건을 뜻하고 해당 []가 비어있으면 조건에 맞는값이 없으므로\n  // 해당 useEffect는 실행되지 않는다. = 해당 컴포넌트가 처음 로드될때만 실행됨\n  // [] 내부에 state 여러개 추가 가능 ex) [state1, state2...]\n  useEffect(() => {\n    let timer = setTimeout(() => {\n      alertChange(false);\n    }, 2000);\n\n    console.log(\"hello\");\n\n    // unmount 될때\n    return () => {\n      clearTimeout(timer);\n    };\n    // settimeout은 해당 초가 지나기 전에 사용자에 의해 페이지 변경이 일어나면\n    // 버그가 발생할 수 있어 실행 후 제거해주는 것이 좋다. = clearTimeout\n  }, []);\n\n  let history = useHistory();\n  let { id } = useParams();\n  // useParams 반환값은 객체 그 안에 url의 모든 파라미터 담겨있음\n  // 그래서 destructuring 을 사용해 변수에 담아줌\n\n  let selectItem = props.shoes.find((i) => {\n    return i.id == id;\n  });\n  // find 메서드는 앞에 온 배열의 하나하나를 인자로 넣어주어 뒤에 콜백함수에 적어준 조건에 맞는 첫번째 값을 반환한다.\n  // 만약 조건에 맞는 모든 값들을 얻고 싶다면 filter 함수를 사용해 배열형태로 조건에 맞는 값들을 받아올 수 있다.\n\n  console.log(selectItem);\n  console.log(id);\n\n  function stockMinus() {\n    let stock = [...props.stock];\n    let idx = selectItem.id;\n    console.log(stock);\n    stock.splice(idx, 1, stock[idx] - 1);\n    console.log(stock);\n    return stock;\n  }\n\n  return (\n    <div className=\"container\">\n      <Box>\n        <Title className=\"red\">Detail</Title>\n      </Box>\n\n      {inputData}\n      <input\n        onChange={(e) => {\n          inputDataChange(e.target.value);\n        }}\n      />\n\n      {\n        // 보통의 UI가 이렇게 true. false를 반환하는 state를 만들고\n        // 삼항조건식으로 생성 및 제거하는 방법으로 구축한다.\n        alert === true ? (\n          <div className=\"my-alert-2\">\n            <p>재고가 얼마 남지 않았습니다</p>\n          </div>\n        ) : null\n      }\n\n      <div className=\"row\">\n        <div className=\"col-md-6\">\n          <img\n            src={\n              \"https://codingapple1.github.io/shop/shoes\" +\n              (selectItem.id + 1) +\n              \".jpg\"\n            }\n            width=\"100%\"\n            alt=\"이미지\"\n          />\n        </div>\n        <div className=\"col-md-6 mt-4\">\n          <h4 className=\"pt-5\">{selectItem.title}</h4>\n          <p>{selectItem.content}</p>\n          <p>{selectItem.price}원</p>\n          <Info stock={props.stock} selectItem={selectItem}></Info>\n          <button\n            className=\"btn btn-danger\"\n            onClick={() => {\n              props.stockChange(stockMinus);\n            }}\n          >\n            주문하기\n          </button>\n          &nbsp;\n          <button\n            className=\"btn btn-danger\"\n            onClick={() => {\n              history.push(\"/\");\n            }}\n          >\n            뒤로가기\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction Info(props) {\n  return <p>재고 : {props.stock[props.selectItem.id]}</p>;\n}\n\nexport default Detail;\n"]},"metadata":{},"sourceType":"module"}